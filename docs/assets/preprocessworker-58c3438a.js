(function(){"use strict";const c="discrete";let a,e;const d=(t,s,n,f,r,o)=>(console.log(s),console.log(n),e.clearRect(0,0,r,o),e.setTransform(1,0,0,1,r/2,o/2),e.rotate(f*Math.PI/180),e.filter=n,e.drawImage(t,-t.width/2,-t.height/2),e.setTransform(1,0,0,1,0,0),e.filter=s,e.drawImage(a,0,0,a.width,a.height,0,0,r,o),e.getImageData(0,0,r,o));self.addEventListener("message",t=>{if(t.data.offscreen){a=t.data.offscreen,e=a.getContext("2d");return}const{inputImageBitmap:s,posterize:n,rgba:f,cssFilters:r,rotate:o,width:l,height:i,dpr:u}=t.data;e.scale(u,u),a.width=l,a.height=i;const p=d(s,g(n,f),r,o,l,i);t.ports[0].postMessage({result:p})});const g=(t,s)=>{const n=[];return t&&n.push({name:"componentTransfer",filter:"componentTransfer",funcR:{type:c,tableValues:s.r},funcG:{type:c,tableValues:s.g},funcB:{type:c,tableValues:s.b},funcA:{type:c,tableValues:s.a}}),new CanvasFilter(n)}})();
